<section class="vh-100 d-flex justify-content-center align-items-center">
  <div class="container py-5">
    <div class="row g-4 align-items-start">
      <!-- Profile Section -->
      <div class="col-md-6">
        <div class="card shadow" style="border-radius: 15px;">
          <div class="card-body text-center">
            <!-- Profile Image -->
            <div class="mt-3 mb-4">
              <img src="<%= current_client.image.url.present? ? current_client.image.url : 'https://via.placeholder.com/200' %>"
                   class="rounded-circle img-fluid border border-3 border-dark"
                   style="width: 200px; height: 200px;"
                   alt="Profile Image">
            </div>
            <h3 class="mb-2"><%= current_client.username %></h3>
            <p class="text-muted mb-4">
              <i class="bi bi-envelope me-1"></i><%= current_client.email %>
            </p>
            <div class="wrap">
              <button class="btn-circle">Cash in</button>
            </div>

            <div class="d-flex justify-content-between text-center mt-4 mb-4 m-5">
              <div class="px-2">
                <p class="mb-1 h6"><%= current_client.total_deposit %></p>
                <p class="text-muted mb-0">Wallets Balance</p>
              </div>
              <div class="px-2">
                <p class="mb-1 h6"><%= current_client.coins %></p>
                <p class="text-muted mb-0">Coin Amounts</p>
              </div>
              <div class="px-2">
                <p class="mb-1 h6"><%= current_client.children_members %></p>
                <p class="text-muted mb-0">Invited members</p>
              </div>
            </div>

            <div class="row row-cols-2 g-3">
              <div class="col">
                <%= link_to 'Edit Profile', edit_client_registration_path, class: "btn-hover color-8" %>
              </div>
              <div class="col">
                <%= link_to 'Addresses', client_locations_path, class: "btn-hover color-8" %>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- History Section -->
      <div class="col-md-6">
        <div class="card shadow" style="border-radius: 15px;">
          <div class="card-body">
            <div class="d-flex justify-content-center mb-3">
              <%= link_to 'Order History', order_history_client_me_path, class: "btn btn-light-dark me-2 " %>
              <%= link_to 'Lottery History', lottery_history_client_me_path, class: "btn btn-light-dark me-2" %>
              <%= link_to 'Winning History', winning_history_client_me_path, class: "btn btn-light-dark me-2 active" %>
              <%= link_to 'Invitation History', invitation_history_client_me_path, class: "btn btn-light-dark" %>
            </div>
            <div id="history-container" style="max-height: 510px; overflow-y: auto;">
              <div class="container-fluid">
                <% @winnings.each do |winner| %>
                  <div class="card mb-3 border-dark-subtle">
                    <div class="card-body">
                      <p><strong>Item:</strong> <%= winner.item.name %></p>
                      <p><strong>Price:</strong> <%= winner.price %></p>
                      <p><strong>Status:</strong><span class="text-success"> <%= winner.state %></span></p>
                      <% if winner.won? %>
                        <%= link_to 'Claim Prize', 'javascript:void(0)', class: "btn btn-primary ", 'data-bs-toggle': :collapse, 'data-bs-target': "#winnerTarget#{winner.id}" %>
                      <% end %>

                      <div class="collapse mt-3" id="winnerTarget<%= winner.id %>">
                        <div class="card card-body">
                          <%= form_with model: winner, url: claim_prize_client_me_path(winner_id: winner.id), html: { class: "form", data: { controller: "address-details" } } do |form| %>

                            <div class="form-group row mb-4">
                              <%= form.label :locations,"Address Selection" , class: "col-sm-4 col-form-label " %>
                              <div class="col-sm-8">
                                <%= form.select :locations,
                                                current_client.locations.map { |location| [location.full_address, location.id] },
                                                { prompt: 'Please select location'},
                                                class: "form-control location-dropdown",
                                                data: { action: "change->address-details#updateDetails", address_details_target: "dropdown" } %>
                              </div>
                            </div>
                            <div id="location-details" class="mt-2" data-address-details-target="details">
                            </div>
                            <div class="d-grid mb-2">
                              <%= form.submit "Ship to this address âœ“", class: "btn btn-dark btn-block" %>
                            </div>
                          <% end %>
                        </div>
                      </div>
                    </div>
                  </div>
                <% end %>
                <%= paginate @winnings %>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>





